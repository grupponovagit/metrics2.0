@config "../../../tailwind.admin.config.js";
@tailwind base;
@tailwind components;
@tailwind utilities;

/* ===== ALPINE.JS CLOAK ===== */
[x-cloak] { 
    display: none !important; 
}

/* ===== RESET OVERFLOW ===== */
body, html {
    overflow-x: hidden !important;
    max-width: 100vw !important;
}

/* Fix specifici per elementi che necessitano overflow */
.submenu-container,
.dropdown,
[x-transition] {
    overflow: visible !important;
}

/* ===== SIDEBAR TAILWIND PURA ===== */

/* Scrollbar personalizzata - SOLO per sidebar content */
.sidebar-content {
    scrollbar-width: thin;
    scrollbar-color: rgb(148 163 184 / 0.3) transparent;
}

.sidebar-content::-webkit-scrollbar {
    width: 6px;
}

.sidebar-content::-webkit-scrollbar-track {
    background: transparent;
}

.sidebar-content::-webkit-scrollbar-thumb {
    background-color: rgb(148 163 184 / 0.3);
    border-radius: 3px;
    transition: background-color 0.2s ease;
}

.sidebar-content::-webkit-scrollbar-thumb:hover {
    background-color: rgb(148 163 184 / 0.5);
}

/* Rimuovi scrollbar da dropdown e submenu */
.submenu-container,
.dropdown-content,
[x-transition] {
    scrollbar-width: none;
    -ms-overflow-style: none;
}

.submenu-container::-webkit-scrollbar,
.dropdown-content::-webkit-scrollbar,
[x-transition]::-webkit-scrollbar {
    display: none;
}

/* ===== SIDEBAR CONTAINER ===== */
.sidebar-main {
    @apply sticky top-0 h-screen bg-base-100 border-r border-base-300 transition-all duration-300 ease-in-out flex flex-col;
    max-height: 100vh;
}

/* Container scrollabile separato - SOLO LA SIDEBAR HA OVERFLOW Y */
.sidebar-content {
    @apply flex-1 overflow-y-auto overflow-x-hidden;
    height: calc(100vh - 120px); /* Sottrae altezza header */
}

/* Assicura che la sidebar sia contenuta */
.sidebar-main .sidebar-content::-webkit-scrollbar {
    width: 6px;
}

.sidebar-main .sidebar-content::-webkit-scrollbar-track {
    @apply bg-base-200;
}

.sidebar-main .sidebar-content::-webkit-scrollbar-thumb {
    @apply bg-base-300 rounded-full;
}

.sidebar-main .sidebar-content::-webkit-scrollbar-thumb:hover {
    @apply bg-base-content/30;
}

.sidebar-collapsed {
    @apply w-16;
}

.sidebar-expanded {
    @apply w-80;
}

/* Fix per assicurare che la sidebar cambi dimensione */
.sidebar-main.sidebar-collapsed {
    width: 4rem !important;
    min-width: 4rem !important;
}

.sidebar-main.sidebar-expanded {
    width: 20rem !important;
    min-width: 20rem !important;
}

/* Transizioni smooth */
.sidebar-main {
    transition: width 0.3s ease-in-out, min-width 0.3s ease-in-out;
}

/* ===== HEADER LOGO ===== */
.sidebar-header {
    @apply p-6 border-b border-base-300 bg-base-200;
}

.logo-container {
    @apply flex items-center;
}

/* ===== SEZIONE MENU ===== */
.menu-section {
    @apply p-4;
}

.section-title {
    @apply text-xs font-semibold text-base-content/60 uppercase tracking-wider mb-4 px-3;
}

/* ===== BOTTONI MODULI ===== */
.module-item {
    @apply mb-2;
}

.module-btn {
    @apply w-full flex items-center justify-between p-4 rounded-xl bg-base-100 border border-base-300 text-base-content hover:bg-base-200 hover:border-base-content/20 hover:shadow-md transition-all duration-200 cursor-pointer;
}

.module-btn:hover {
    @apply transform -translate-y-0.5;
}

.module-btn-active {
    @apply bg-primary/10 border-primary/30 text-primary shadow-md;
}

.module-btn-active:hover {
    @apply bg-primary/15 border-primary/40;
}

.module-icon-container {
    @apply w-12 h-12 rounded-xl bg-base-200 flex items-center justify-center text-base-content/70 transition-all duration-200;
}

.module-btn:hover .module-icon-container {
    @apply bg-base-300 scale-105 text-base-content;
}

.module-btn-active .module-icon-container {
    @apply bg-primary/20 text-primary;
}

.module-title {
    @apply font-semibold text-sm;
}

.chevron-icon {
    @apply w-5 h-5 text-base-content/50 transition-transform duration-200;
}

.chevron-rotated {
    @apply rotate-180;
}

.module-btn:hover .chevron-icon {
    @apply text-base-content/70;
}

.module-btn-active .chevron-icon {
    @apply text-primary;
}

/* ===== SIDEBAR COLLASSATA ===== */
.sidebar-collapsed .module-btn {
    @apply justify-center p-2;
}

.sidebar-collapsed .module-icon-container {
    @apply w-8 h-8;
}

.sidebar-collapsed .module-icon-container i {
    @apply text-sm;
}

/* Centra tutto quando collassata */
.sidebar-collapsed .menu-section {
    @apply flex flex-col items-center;
}

.sidebar-collapsed .module-item {
    @apply flex justify-center;
}

.sidebar-collapsed .system-link {
    @apply justify-center mx-1 p-2;
}

.sidebar-collapsed .system-icon {
    @apply w-8 h-8;
}

.sidebar-collapsed .system-icon i {
    @apply text-sm;
}

/* Header collassato */
.sidebar-collapsed .sidebar-header {
    @apply px-2 py-4;
}

/* Logo pi√π grande quando collassato */
.sidebar-collapsed .logo-container div {
    @apply w-12 h-12;
}

.sidebar-collapsed .logo-container img {
    @apply w-8 h-8;
}


/* ===== SUBMENU ===== */
.submenu-container {
    @apply mt-3 mx-3 bg-base-200 border border-base-300 rounded-xl p-3 space-y-2 overflow-visible;
    max-height: none !important;
    height: auto !important;
}

.submenu-item {
    @apply block;
}

.submenu-link {
    @apply flex items-center space-x-3 p-3 rounded-lg text-base-content/80 hover:bg-base-100 hover:text-base-content hover:shadow-sm transition-all duration-200;
}

.submenu-link-active {
    @apply bg-base-100 text-primary shadow-sm;
}

.submenu-icon {
    @apply w-8 h-8 rounded-lg bg-base-300 flex items-center justify-center text-base-content/60 text-sm;
}

.submenu-link:hover .submenu-icon {
    @apply bg-base-content/10 text-base-content/80;
}

.submenu-link-active .submenu-icon {
    @apply bg-primary/20 text-primary;
}

.submenu-text {
    @apply font-medium text-sm;
}

/* ===== MENU SISTEMA ===== */
.system-section {
    @apply border-t border-base-300 pt-4;
}

.system-title {
    @apply text-xs font-semibold text-base-content/60 uppercase tracking-wider mb-3 px-3 flex items-center;
}

.system-link {
    @apply flex items-center space-x-3 p-3 mx-3 rounded-lg text-base-content/80 hover:bg-base-200 hover:text-base-content transition-all duration-200 mb-1;
}

.system-link:hover {
    @apply transform translate-x-1;
}

.system-link-active {
    @apply bg-secondary/10 text-secondary;
}

.system-icon {
    @apply w-8 h-8 rounded-lg bg-base-300 flex items-center justify-center text-base-content/60 text-sm;
}

.system-link:hover .system-icon {
    @apply bg-base-content/10 text-base-content/80;
}

.system-link-active .system-icon {
    @apply bg-secondary/20 text-secondary;
}

/* ===== ANIMAZIONI ===== */
.fade-in {
    animation: fadeIn 0.3s ease-out;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(-10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.slide-down {
    animation: slideDown 0.3s ease-out;
}

@keyframes slideDown {
    from {
        opacity: 0;
        transform: translateY(-20px) scale(0.95);
    }
    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

/* ===== TOOLTIP CUSTOM ===== */
.tooltip-custom {
    @apply absolute left-full ml-2 px-3 py-2 bg-gray-900 dark:bg-gray-100 text-white dark:text-gray-900 text-sm rounded-lg shadow-lg whitespace-nowrap z-50 opacity-0 pointer-events-none transition-opacity duration-200;
}

.tooltip-show {
    @apply opacity-100;
}

/* ===== FIX DROPDOWN EXPANSION ===== */
[x-show] {
    overflow: visible !important;
}

[x-transition] {
    overflow: visible !important;
    max-height: none !important;
    height: auto !important;
}

/* Fix per submenu che devono espandersi */
.module-item {
    overflow: visible !important;
}

.submenu-container {
    overflow: visible !important;
    max-height: none !important;
    height: auto !important;
    z-index: 10;
}

/* Assicura che Alpine.js funzioni */
[x-cloak] { 
    display: none !important; 
}

/* ===== DEBUG ALPINE.JS ===== */
.sidebar-main[x-data] {
    position: relative;
}

/* ===== RESPONSIVE ===== */
@media (max-width: 1024px) {
    .sidebar-main {
        @apply w-80;
    }
}